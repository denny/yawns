#!/bin/sh
#
# Install debian dependencies
#


#
# Install the given pacakge
#
function install
{
    dpkg --list $1  >/dev/null 2>/dev/null || apt-get install $1 --yes --force-yes
}

#
#  Enable the given Apache module
#
function modenable
{
    [ -e /etc/apache2/mods-enabled/$1.conf ] || a2enmod $1
}



#
#  Install what we need
#
install perl
install perl-modules
install libcgi-pm-perl
install libdbi-perl libdbd-mysql-perl
install libhtml-parser-perl
install libhtml-tree-perl
install libredis-perl
install libcgi-session-perl
install libhtml-template-perl
install libauthen-captcha-perl
install libtimedate-perl
install libmail-verify-perl
install libtext-diff-perl
install libtext-textile-perl
install liburi-find-perl
install libsys-cpuload-perl
install libcache-memcached-perl
install libtext-markdown-perl
install libdbd-mysql-perl

# for test-suite
install libtest-file-perl
install libtest-pod-perl
install libxml2-utils
install libtemplate-perl



#
#  Install Apache modules
#
modenable alias
modenable autoindex
modenable cgid
modenable deflate
modenable dir
modenable mime
modenable negotiation
modenable reqtimeout
modenable rpaf
modenable setenvif


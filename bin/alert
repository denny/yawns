#!/usr/bin/perl

=head1 NAME

alert - Send an alert.

=head1 SYNOPSIS

  alert message to send

=cut

=head1 DESCRIPTION

This script is designed to send a message to our alerting system, via
a single UDP messages.

=cut

=head1 AUTHOR

 Steve
 --
 http://www.steve.org.uk/

=cut

=head1 LICENSE

Copyright (c) 2014 by Steve Kemp.  All rights reserved.

This script is free software; you can redistribute it and/or modify it under
the same terms as Perl itself.

The LICENSE file contains the full text of the license.

=cut


use strict;
use warnings;

use IO::Socket;


#
#  Get the message
#
my $msg = shift(@ARGV);
exit(0) unless ( defined($msg) && length($msg) );

my $sock = IO::Socket::INET->new( Proto    => 'udp',
                                  PeerPort => 4433,
                                  PeerAddr => "misc.debian-administration.org",
  ) or
  exit(0);


$sock->send($msg);
exit(0);

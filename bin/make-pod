#!/usr/bin/perl -w -I..
#
#  Make the POD for each of our modules.
#
# Steve
# --
# $Id: make-pod,v 1.4 2006-12-05 18:11:15 steve Exp $
#

use strict;
use HTML::FromPod;
use File::Find;


my %items;;


#
#  Called as a result of the File::Find module.
#
sub wanted
{
    my $file = $File::Find::name;

    # Strip leading './' if present.
    if  ($file =~ /\.\/(.*)/ ) { $file = $1; }

    # We only care about '.pm' files.
    if ( $file =~ /.pm$/i )
    {
	return if ( $file =~ /Pod/i );
	return if ( $items{ $file } );

	my $module = $file;
	if ( $module =~ /^.\/(.*)/ )
	{
	    $module = $1;
	}
	if ( $module =~ /(.*)\.pm$/ )
	{
	    $module = $1;
	}
	$module =~ s/\//::/g;

	print "File '$file' -> $module\n";

	$items{ $file } = $module;
    }

}

find( { wanted => \&wanted, no_chdir => 1 }, "." );

HTML::FromPod::pod2html( {-dir=> 'Code/pod/', -idx=>0}, \%items ); 
